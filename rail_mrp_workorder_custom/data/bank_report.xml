<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="arod_bank_flow_report" model="account.report">
        <field name="name">Flujo de bancos</field>
        <field name="filter_date_range" eval="True"/>
        <field name="filter_analytic_groupby" eval="True"/>
        <field name="filter_unfold_all" eval="True"/>
        <field name="filter_journals" eval="True"/>
        <field name="filter_multi_company">selector</field>
        <field name="default_opening_date_filter">this_year</field>
        <field name="filter_hierarchy">by_default</field>
        <field name="column_ids">
            <record id="balance_sheet_balance" model="account.report.column">
                <field name="name">Balance</field>
                <field name="expression_label">balance</field>
            </record>
        </field>
        <field name="line_ids">
            <!--Saldo inicial-->
            <record id="arod_bank_flow_start_balance" model="account.report.line">
                <field name="name">SALDO INICIAL</field>
                <field name="code">AROD_BANK_INI</field>
                <field name="groupby">account_id</field>
                <field name="foldable" eval="False"/>
                <field name="expression_ids">
                    <record id="arod_bank_flow_start_balance_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">domain</field>
                        <field name="formula" eval="[('account_id.account_type', '=', 'asset_cash')]"/>
                        <field name="subformula" eval="sum"/>
                        <field name="date_scope">to_beginning_of_period</field>
                    </record>
                </field>
            </record>
            <!--Ingresos-->
            <record id="arod_bank_flow_incomes" model="account.report.line">
                <field name="name">INGRESOS</field>
                <field name="code">AROD_BANK_INC</field>
                <field name="groupby">move_id,account_id</field>
                <field name="foldable" eval="True"/>
                <field name="expression_ids">
                    <record id="arod_bank_flow_incomes_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">domain</field>
                        <field name="formula" eval="[('account_id.account_type', '=', 'asset_cash'),('debit','>',0)]"/>
                        <field name="subformula" eval="sum"/>
                        <field name="date_scope">strict_range</field>
                    </record>
                </field>
            </record>
            <!--Egresos-->
            <record id="arod_bank_flow_outcomes" model="account.report.line">
                <field name="name">EGRESOS</field>
                <field name="code">AROD_BANK_OUT</field>
                <field name="groupby">move_id,account_id</field>
                <field name="foldable" eval="True"/>
                <field name="expression_ids">
                    <record id="arod_bank_flow_outcomes_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">domain</field>
                        <field name="formula" eval="[('account_id.account_type', '=', 'asset_cash'),('credit','>',0)]"/>
                        <field name="subformula" eval="sum"/>
                        <field name="date_scope">strict_range</field>
                    </record>
                </field>
            </record>
            <!--Saldo final-->
            <record id="arod_bank_flow_end_balance" model="account.report.line">
                <field name="name">SALDO FINAL</field>
                <field name="code">AROD_BANK_BAL</field>
                <field name="groupby">account_id</field>
                <field name="foldable" eval="False"/>
                <field name="expression_ids">
                    <record id="arod_bank_flow_end_balance_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">domain</field>
                        <field name="formula" eval="[('account_id.account_type', '=', 'asset_cash')]"/>
                        <field name="subformula" eval="sum"/>
                        <field name="date_scope">normal</field>
                    </record>
                </field>
            </record>
        </field>
    </record>
    <record id="action_account_report_arod_bankflow" model="ir.actions.client">
        <field name="name">Flujo Bancario</field>
        <field name="tag">account_report</field>
        <field name="context" eval="{'report_id': ref('rail_mrp_workorder_custom.arod_bank_flow_report')}"/>
    </record>
</odoo>